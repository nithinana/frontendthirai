<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thirai</title>

<style>
:root{
  --bg:#080808;
  --card:#121212;
  --text:#ffffff;
  --border:#333;
  --primary:#e50914;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,sans-serif;
  padding-bottom:70px;
}

/* Loader */
#homeLoader{
  position:fixed;
  inset:0;
  background:var(--bg);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
#homeLoader.hidden{display:none;}
.loader-ring{
  width:44px;
  height:44px;
  border:4px solid var(--border);
  border-top-color:var(--primary);
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>

<div id="homeLoader">
  <div class="loader-ring"></div>
</div>

<!-- Banner -->
<section id="hero"></section>

<!-- Categories -->
<section id="categories"></section>

<script>
/* INLINE MOVIES â€” USED ONLY FOR BANNER */
const bannerMovies = [
  { title:"Banner Movie", img:"https://via.placeholder.com/800x450", link:"#"} 
];

function loadBanner(){
  const hero = document.getElementById('hero');
  const m = bannerMovies[0];
  hero.innerHTML = `
    <a href="${m.link}">
      <img src="${m.img}" style="width:100%;display:block">
    </a>
  `;
}

/* CACHE-ONLY CATEGORY LOADING */
const categories = ['popular','trending','latest','toprated'];
const lang = 'tamil';

async function loadCategories(){
  const wrap = document.getElementById('categories');
  for(const c of categories){
    try{
      const r = await fetch(`/cache/${lang}${c}.json`);
      const data = await r.json();
      const row = document.createElement('div');
      row.innerHTML = `<h3>${c}</h3>` + data.movies.map(m =>
        `<a href="${m.page_url}"><img src="${m.img_url}" width="100"></a>`
      ).join('');
      wrap.appendChild(row);
    }catch(e){}
  }
  document.getElementById('homeLoader').classList.add('hidden');
}

loadBanner();
loadCategories();
</script>

</body>
</html>
