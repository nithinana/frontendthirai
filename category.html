<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thirai Filter</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    
    <style>
        :root {
            --bg: #f8f9fa; --card: #ffffff; --text: #212529; --border: #dee2e6; --primary: #0d6efd;
        }
        @media (prefers-color-scheme: dark) {
            :root { --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --border: #333; }
        }

        body {
            background-color: var(--bg); 
            color: var(--text);
            font-family: system-ui, -apple-system, sans-serif;
            margin: 0; 
            padding: 0; /* Removed padding to allow card to touch edges */
            height: 100vh;
            width: 100vw;
            overflow-x: hidden; /* Prevent horizontal scroll */
        }

        .filter-card {
            background: var(--card); 
            border: none; /* Removed border for seamless full-screen look */
            border-radius: 0; /* Removed rounded corners for full-screen */
            padding: 40px; /* Increased padding for better large-screen spacing */
            width: 100%; /* Fill width */
            min-height: 100vh; /* Fill height */
            box-shadow: none;
            box-sizing: border-box;
            max-width: 100%; /* Ensure it doesn't stay at 320px */
        }

        /* Optimization for very wide screens so the UI doesn't look stretched thin */
        .content-wrapper {
            max-width: 600px; /* Limits the inner content width for readability */
            margin: 0 auto;
        }

        .section-title {
            font-size: 12px; font-weight: 800; text-transform: uppercase;
            letter-spacing: 1.2px; color: #6c757d; margin-bottom: 12px; display: block;
        }

        .genre-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        
        .genre-btn {
            font-size: 13px; padding: 12px 0; border-radius: 12px;
            border: 1px solid var(--border); background: var(--bg);
            color: var(--text); cursor: pointer; transition: 0.2s; font-weight: 600;
        }
        .genre-btn.active { background: var(--primary); border-color: var(--primary); color: white; }

        #customSection, #yearExpandSection {
            max-height: 0; overflow: hidden;
            transition: max-height 0.4s ease-out;
        }
        #customSection.expanded { max-height: 1000px; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px dashed var(--border); }
        #yearExpandSection.expanded { max-height: 600px; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid var(--border); }

        .year-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .year-btn {
            font-size: 12px; padding: 10px 0; border-radius: 10px;
            border: 1px solid var(--border); background: var(--card);
            color: var(--text); cursor: pointer; font-weight: 600; transition: 0.2s;
        }
        .year-btn:hover { border-color: var(--primary); color: var(--primary); background: rgba(13, 110, 253, 0.05); }
        .explore-decade {
            grid-column: span 4; background: rgba(13, 110, 253, 0.1);
            color: var(--primary); border: 1px dashed var(--primary);
            margin-top: 6px; font-weight: 800; text-transform: uppercase;
            font-size: 11px; padding: 12px;
        }

        .slider-box { margin-bottom: 18px; }
        .slider-head { display: flex; justify-content: space-between; align-items: center; font-size: 13px; margin-bottom: 8px; }
        .slider-head b { color: var(--primary); font-weight: 800; }
        .any-check { display: flex; align-items: center; gap: 6px; font-size: 11px; font-weight: 700; cursor: pointer; color: #6c757d; }
        input[type="range"] { width: 100%; height: 8px; accent-color: var(--primary); cursor: pointer; }

        .top-controls { margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
        
        .action-controls { 
            display: flex; gap: 15px; margin-bottom: 25px; padding-bottom: 25px; 
            border-bottom: 1px solid var(--border); align-items: flex-end;
        }
        
        select, .pg-num {
            background: var(--bg); color: var(--text); border: 1px solid var(--border);
            border-radius: 12px; padding: 12px; font-size: 14px; outline: none; width: 100%;
        }

        .btn-fetch {
            flex-grow: 1; height: 48px; background: var(--primary); color: white; border: none;
            border-radius: 12px; font-weight: 700; font-size: 15px; text-transform: uppercase; 
            letter-spacing: 0.8px; transition: 0.2s;
        }
    </style>
</head>
<body>

<div class="filter-card">
    <div class="content-wrapper">
        <div class="top-controls">
            <span class="section-title">Language</span>
            <select id="ln">
                <option value="tamil" selected>Tamil</option>
                <option value="hindi">Hindi</option>
                <option value="telugu">Telugu</option>
                <option value="malayalam">Malayalam</option>
                <option value="Kannada">Kannada</option>
                <option value="Punjab">Punjab</option>
                <option value="Marathi">Marathi</option>
            </select>
        </div>

        <span class="section-title">Quick Genres</span>
        <div class="genre-grid">
            <button class="genre-btn" data-attr="action" onclick="toggleGenre(this)">Action</button>
            <button class="genre-btn" data-attr="comedy" onclick="toggleGenre(this)">Comedy</button>
            <button class="genre-btn" data-attr="romance" onclick="toggleGenre(this)">Romance</button>
            <button class="genre-btn" data-attr="storyline" onclick="toggleGenre(this)">Storyline</button>
            <button class="genre-btn" data-attr="performance" onclick="toggleGenre(this)">Performance</button>
            <button class="genre-btn" style="color: var(--primary)" onclick="toggleCustom()">
                <i class="bi bi-sliders"></i> Custom
            </button>
        </div>

        <div id="customSection">
            <span class="section-title">Genre Tuning</span>
            <div id="slider-container"></div>
            
            <div class="slider-box" style="margin-top: 10px;">
                <div class="slider-head"><span style="font-weight: 800; font-size: 10px; text-transform: uppercase;">Review Count</span></div>
                <input type="number" id="ratecount" class="pg-num" value="75" min="0">
            </div>
        </div>

        <div class="action-controls">
            <div style="width: 80px;">
                <span class="section-title" style="font-size: 8px; margin-bottom: 4px;">Page</span>
                <input type="number" id="pg" class="pg-num" value="1" min="1">
            </div>
            <button class="btn-fetch" onclick="go()">Go</button>
        </div>

        <span class="section-title">Release Date</span>
        <div class="genre-grid" style="grid-template-columns: repeat(4, 1fr);">
            <button class="genre-btn" onclick="showYears(2020)">2020s</button>
            <button class="genre-btn" onclick="showYears(2010)">2010s</button>
            <button class="genre-btn" onclick="showYears(2000)">2000s</button>
            <button class="genre-btn" onclick="showYears(1990)">1990s</button>
            <button class="genre-btn" onclick="showYears(1980)">1980s</button>
            <button class="genre-btn" onclick="showYears(1970)">1970s</button>
            <button class="genre-btn" onclick="showYears(1960)">1960s</button>
            <button class="genre-btn" onclick="showYears(1950)">1950s</button>
        </div>

        <div id="yearExpandSection">
            <div id="yearGridContent" class="year-grid"></div>
        </div>
    </div>
</div>

<script>
    // [All original script logic preserved]
    const categories = ['action', 'comedy', 'romance', 'storyline', 'performance'];
    const sliderContainer = document.getElementById('slider-container');

    categories.forEach(cat => {
        const div = document.createElement('div');
        div.className = 'slider-box';
        div.innerHTML = `
            <div class="slider-head">
                <span style="text-transform: capitalize;">${cat}: <b id="v-${cat}">ANY</b></span>
                <label class="any-check"><input type="checkbox" id="c-${cat}" checked onchange="handleAny('${cat}')"> ANY</label>
            </div>
            <input type="range" id="s-${cat}" min="1" max="4" value="4" disabled oninput="updateLabel('${cat}')">
        `;
        sliderContainer.appendChild(div);
    });

    function toggleCustom() {
        const customBox = document.getElementById('customSection');
        const yearBox = document.getElementById('yearExpandSection');
        yearBox.classList.remove('expanded');
        customBox.classList.toggle('expanded');
    }

    function showYears(decade) {
        const yearBox = document.getElementById('yearExpandSection');
        const yearContent = document.getElementById('yearGridContent');
        const customBox = document.getElementById('customSection');
        const lang = document.getElementById('ln').value;
        customBox.classList.remove('expanded');
        if (yearBox.classList.contains('expanded') && yearBox.dataset.activeDecade == decade) {
            yearBox.classList.remove('expanded');
            return;
        }
        yearContent.innerHTML = ''; 
        yearBox.dataset.activeDecade = decade;
        for (let i = 0; i <= 9; i++) {
            let year = decade + i;
            if (year > new Date().getFullYear()) break;
            const btn = document.createElement('button');
            btn.className = 'year-btn';
            btn.innerText = year;
            btn.onclick = () => window.open(`https://thirai.me/year?lang=${lang}&year=${year}`, '_blank');
            yearContent.appendChild(btn);
        }
        const exploreBtn = document.createElement('button');
        exploreBtn.className = 'year-btn explore-decade';
        exploreBtn.innerHTML = `Explore the ${decade}s`;
        exploreBtn.onclick = () => window.open(`https://thirai.me/decade?lang=${lang}&decade=${decade}`, '_blank');
        yearContent.appendChild(exploreBtn);
        yearBox.classList.add('expanded');
    }

    function toggleGenre(btn) {
        const attr = btn.getAttribute('data-attr');
        btn.classList.toggle('active');
        const checkbox = document.getElementById('c-' + attr);
        const slider = document.getElementById('s-' + attr);
        if (btn.classList.contains('active')) {
            checkbox.checked = false;
            slider.disabled = false;
            slider.value = 4;
        } else {
            checkbox.checked = true;
            slider.disabled = true;
        }
        updateLabel(attr);
    }

    function handleAny(id) {
        const s = document.getElementById('s-' + id);
        const check = document.getElementById('c-' + id);
        s.disabled = check.checked;
        const btn = document.querySelector(`.genre-btn[data-attr="${id}"]`);
        if (btn) {
            if (check.checked) btn.classList.remove('active');
            else if (s.value == 4) btn.classList.add('active');
        }
        updateLabel(id);
    }

    function updateLabel(id) {
        const label = document.getElementById('v-' + id);
        const isAny = document.getElementById('c-' + id).checked;
        label.innerText = isAny ? "ANY" : document.getElementById('s-' + id).value;
    }

    function go() {
        const lang = document.getElementById('ln').value;
        const page = document.getElementById('pg').value;
        const rateCount = document.getElementById('ratecount').value || 0;
        const params = categories.map(cat => {
            const isAny = document.getElementById('c-' + cat).checked;
            const val = isAny ? "0" : document.getElementById('s-' + cat).value;
            return `${cat}=${val}`;
        }).join('&');
        const url = `https://api.thirai.me/genre/${lang}?${params}&ratecount=${rateCount}&page=${page}`;
        window.open(url, '_blank');
    }
</script>

</body>
</html>
